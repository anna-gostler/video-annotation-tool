{"version":3,"sources":["Slider.jsx","ResizeBox.jsx","BoundingBox.jsx","SpeechBubble.jsx","SpeechBubbleFlipped.jsx","App.js","serviceWorker.js","index.js"],"names":["Slider","props","handleSliderInput","event","type","console","log","setState","startPosX","pageX","dragModeOn","setFrameNo","value","offsetX","state","xPos","new_left","Math","max","min_value","newFrameNumber","ceil","imagewidth","max_value","min","max_tracked","selectedFrameNumber","ReactDOM","findDOMNode","this","addEventListener","document","style","width","backgroundColor","colorPalette","LightGray","height","borderRadius","className","num_imgs","top","position","RoyalBlue","id","left","LightSalmon","onMouseDown","onMouseUp","align","textAlign","verticalAlign","React","Component","ResizeBox","resizeModeOn","posx","posy","handleResize","onMouseMove","onMouseOut","BoundingBox","componentDidMount","handleMouseDown","handleDrag","isSelected","componentWillUnmount","removeEventListener","handleMouseUp","ElementStyle","cursor","possibleResizeModeOn","w","l","h","pageY","t","handleBBoxUpdate","number","diffx","diffy","undefined","bind","resizebox","classname","SpeechBubble","lineHeight","display","text","SpeechBubbleFlipped","App","FrameArea","handleKeyPress","keyCode","_trackerOutput","trackerOutput","i","frameNumber","isValidBBox","_new_frame_number","Number","maxFrameNumber","imagesrc","getFrame","push","original_imagewidth","original_height","imagebasepath","trackingInProgress","frameNumberStyle","CoralReef","BleuDeFrance","DarkTurquoise","onImgLoad","closeHint","f","pythonCall","url","fetch","then","res","handleTrackerOutput","activeElement","blur","boundingBoxes","key","diplayWaitIcon","displaySpeechBubble1","displaySpeechBubble2","onLoad","src","alt","draggable","onClick","runTracker","frameno","split","last_tracked_box","length","item","getFrameFromFrameNo","pad","num","size","s","getElementById","clientWidth","original_imageheight","clientHeight","ondragstart","temp_trackerOutput","bbox","Boolean","window","location","hostname","match","render","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.38b30460.chunk.js","sourcesContent":["import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nclass Slider extends React.Component {\r\n\r\n\r\n    // enter -> move to next frame number but do not overwrite bboxes if they exist (not [0000])\r\n    // tracker -> extend maxtracked, overwrite following bboxes\r\n\r\n    // new example vid (pedestrian from http://www.votchallenge.net/vot2018/dataset.html)\r\n\r\n    // scale image / bbox by some factor\r\n\r\n    // add explanation bubbles (tracker btn-run until fail, correct bbox, vid source, tracking in progress)\r\n\r\n    //finally: upload to azure (install cv2)\r\n\r\n    constructor(props) {\r\n      super(props);\r\n      console.log(this.props)\r\n      this.state = {\r\n        startPosX: 0, \r\n        offsetX: 0,\r\n        dragModeOn: false,\r\n      };\r\n    }\r\n\r\n    componentDidMount() {\r\n        ReactDOM.findDOMNode(this).addEventListener('mousedown', this.handleSliderInput); \r\n        document.addEventListener('mousemove', this.handleSliderInput); \r\n        document.addEventListener('mouseup', this.handleSliderInput); \r\n    }\r\n\r\n\r\n    handleSliderInput = (event) => {\r\n\r\n        if (event.type === \"mousedown\"){\r\n            console.log('slider mousedown')\r\n          this.setState({\r\n            startPosX: event.pageX,\r\n            dragModeOn: true,\r\n          });\r\n\r\n        } else if (event.type === \"mouseup\"){ \r\n            console.log('slider mouseup')\r\n\r\n            //update frameno depending on offset\r\n            //convert pixel offset to slider value\r\n            this.props.setFrameNo(this.props.value) //run tracker changes this to maxtracked\r\n            this.setState({\r\n                offsetX: event.pageX - this.state.startPosX,\r\n                dragModeOn: false,\r\n              });\r\n\r\n        } else if (event.type === \"mousemove\"){\r\n            // on move: register offset from start pos\r\n            // allow slide only to already tracked/manually marked frames\r\n\r\n            //convert framenumber to position on slider .. \r\n            // slider is either set manually or through pressing enter/tracking\r\n            // set to frame number\r\n\r\n            if (this.state.dragModeOn === true){\r\n\r\n                var xPos = event.pageX;\r\n                var new_left = xPos - 100; // 100 is left of FrameArea\r\n                new_left = Math.max(this.props.min_value, new_left)\r\n\r\n                var newFrameNumber = Math.ceil((new_left/this.props.imagewidth) * this.props.max_value);\r\n                newFrameNumber = Math.min(newFrameNumber, this.props.max_tracked)\r\n\r\n                this.setState({\r\n                    offsetX:  xPos - this.state.startPosX,\r\n                    selectedFrameNumber: newFrameNumber,\r\n                }); \r\n                this.props.setFrameNo(newFrameNumber)\r\n            }\r\n        }\r\n      }\r\n  \r\n    render() {\r\n\r\n      return(\r\n        <div style = {{\r\n            width: this.props.imagewidth,\r\n            backgroundColor: this.props.colorPalette.LightGray,\r\n            height: \"20px\",\r\n            borderRadius: \"0px\",\r\n        }} \r\n        className=\"backgroundSlider\">\r\n\r\n        <div style = {{\r\n            // width\r\n            // ex: 25 out of 50 frames tracked 25/50 = 0.5\r\n            // in perc: 0.5*100= 50%\r\n            width: ((this.props.max_tracked)/this.props.num_imgs)*100 + '%', \r\n            backgroundColor:\"#A9A9A9\", \r\n            height:\"20px\", \r\n            top: \"0px\", \r\n            position: \"relative\"}} \r\n        className=\"trackedSlider\"/>\r\n            \r\n        <div style = {{\r\n            backgroundColor: this.props.colorPalette.RoyalBlue,\r\n            height: \"20px\",\r\n            borderRadius: \"0px\",\r\n            position: \"relative\",\r\n            top: \"-20px\",\r\n            // width\r\n            // ex: 25 out of 50 frames 25/50 = 0.5\r\n            // in perc: 0.5*100= 50%\r\n            width: ((this.props.value)/this.props.num_imgs)*100 +\"%\",   \r\n            }} \r\n        className=\"selectedSlider\"/>\r\n\r\n        <div id=\"Thumb\" className=\"Thumb\" style = {{\r\n            left: (this.props.value - 1) * (this.props.imagewidth/this.props.num_imgs), \r\n            backgroundColor: this.props.colorPalette.LightSalmon,\r\n        }\r\n        } onMouseDown = {this.props.handleSliderInput} onMouseUp = {this.props.handleSliderInput}>\r\n            <p style = {{\r\n                align:\"center\", \r\n                textAlign: \"center\", \r\n                verticalAlign: \"middle\",\r\n                top: \"25px\", \r\n                position: \"relative\",\r\n                }}>{this.props.value}</p>\r\n        </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  export default Slider;","import React from 'react';\r\n\r\n// little box on bbox's lower right corner\r\n// resizes box when dragged\r\n// child of Bounding Box\r\nclass ResizeBox extends React.Component{\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n        resizeModeOn: false,\r\n      };\r\n    }\r\n  \r\n    render() {\r\n      return (\r\n        <div className=\"resizebox\" style = {{left: this.props.posx, top: this.props.posy}}\r\n          onMouseDown ={this.props.handleResize} // called in parent BoundingBox\r\n          onMouseMove ={this.props.handleResize}\r\n          onMouseOut ={this.props.handleResize}\r\n        > \r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  export default ResizeBox;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport ResizeBox from './ResizeBox'\r\n\r\n\r\nclass BoundingBox extends React.Component {\r\n\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n        ElementStyle: {\r\n          left: props.l + \"px\",\r\n          top: props.t + \"px\",\r\n          width: props.w + \"px\",\r\n          height: props.h + \"px\",\r\n          cursor: \"default\",\r\n        },\r\n        l: props.l,\r\n        t: props.t,\r\n        h: props.h,\r\n        w: props.w,\r\n        diffx: 0,\r\n        diffy: 0,\r\n        dragModeOn: false,\r\n        resizeModeOn: false,\r\n        possibleResizeModeOn: false, // if active -> do not drag\r\n      };\r\n  \r\n  \r\n      this.handleResize = this.handleResize.bind(this)\r\n    }\r\n  \r\n    componentDidMount = () => {\r\n  \r\n          ReactDOM.findDOMNode(this).addEventListener('mousedown', this.handleMouseDown); \r\n          ReactDOM.findDOMNode(this).addEventListener('mousemove', this.handleDrag); \r\n  \r\n          //in handle: remove 'mousedown' while mouse down, add when mouse up\r\n          if (this.props.isSelected){\r\n            //console.log('mount selected element ' + this.props.number)\r\n            //ReactDOM.findDOMNode(this).addEventListener('mousedown', this.handleMouseDown); \r\n          }else{\r\n            //console.log('mount un-selected element')\r\n          }\r\n  \r\n          //in handle: remove 'mouseup' while mouse up, add when mouse down\r\n          //in handle: remove 'mousemove' while mouse up, add when mouse down\r\n    }\r\n  \r\n    componentWillUnmount = () => {\r\n      // remove all listeners that are attached to this\r\n      ReactDOM.findDOMNode(this).removeEventListener('mousedown', this.handleMouseDown); \r\n      document.removeEventListener('mouseup', this.handleMouseUp); \r\n      document.removeEventListener('mousemove', this.handleMouseUp); \r\n    }\r\n  \r\n    render() {\r\n      // add resize box only to selected element\r\n  \r\n      var resizebox;\r\n      if (this.props.isSelected) {\r\n        resizebox = (\r\n        <ResizeBox posx={(this.state.w - 5) + \"px\"} posy={(this.state.h - 5) + \"px\"} \r\n        handleResize = {this.handleResize}\r\n        ></ResizeBox>)\r\n      }\r\n  \r\n      return (\r\n        <div className ={this.props.classname} style={this.state.ElementStyle} >\r\n          {resizebox}\r\n        </div>\r\n      );\r\n    }\r\n  \r\n    handleResize = (event) => {\r\n      console.log('handle resize')\r\n      // only if this is the selected bbox\r\n      if(this.props.isSelected){\r\n      if (event.type === 'mousedown'){\r\n        //console.log('clicked: resize me')\r\n  \r\n        // enter resize state\r\n        this.setState({\r\n          resizeModeOn: true,\r\n        });\r\n        this.setState({          \r\n          ElementStyle: {\r\n            left: this.state.ElementStyle.left,\r\n            top: this.state.ElementStyle.top,\r\n            height: this.state.ElementStyle.height,\r\n            width: this.state.ElementStyle.width,\r\n            cursor: \"nw-resize\",\r\n          }\r\n        });\r\n        document.addEventListener('mousemove', this.handleResize); \r\n  \r\n      } else if (event.type === 'mousemove'){\r\n        //console.log('listen for mouse-up')\r\n        document.addEventListener('mouseup', this.handleMouseUp); \r\n        this.setState({          \r\n          ElementStyle: {\r\n            left: this.state.ElementStyle.left,\r\n            top: this.state.ElementStyle.top,\r\n            height: this.state.ElementStyle.height,\r\n            width: this.state.ElementStyle.width,\r\n            cursor: \"nw-resize\",\r\n          }\r\n        });\r\n  \r\n        this.setState({ \r\n          possibleResizeModeOn: true, \r\n        });\r\n        if (this.state.resizeModeOn){\r\n          var minwidthheight = 5;\r\n          var offset_framearea = 100;\r\n  \r\n          // stop if width/height == 0\r\n          if (this.state.w >= minwidthheight){\r\n            // add mouse-position to width\r\n            this.setState({\r\n              w: Math.max(minwidthheight,event.pageX - this.state.l - offset_framearea),\r\n            });\r\n      \r\n            this.setState({          \r\n              ElementStyle: {\r\n                left: this.state.ElementStyle.left,\r\n                top: this.state.ElementStyle.top,\r\n                height: this.state.ElementStyle.height,\r\n                width: (this.state.w) + \"px\",\r\n                cursor: \"nw-resize\",\r\n              }\r\n            });\r\n          }\r\n          if (this.state.h >= minwidthheight){\r\n              // add mouse-position to height\r\n              this.setState({\r\n                h: Math.max(minwidthheight, event.pageY - this.state.t - offset_framearea),\r\n              });\r\n        \r\n              this.setState({          \r\n                ElementStyle: {\r\n                  left: this.state.ElementStyle.left,\r\n                  top: this.state.ElementStyle.top,\r\n                  height: (this.state.h) + \"px\",\r\n                  width: this.state.ElementStyle.width,\r\n                  cursor: \"nw-resize\",\r\n                }\r\n              });\r\n            }\r\n  \r\n  \r\n            // only pass changed values to parent\r\n            this.props.handleBBoxUpdate(this.state.l,this.state.t,this.state.w,this.state.h, this.props.number); \r\n        }\r\n      } else if (event.type === \"mouseout\") {\r\n        this.setState({\r\n          possibleResizeModeOn: false,\r\n          ElementStyle: {\r\n            left: this.state.ElementStyle.left,\r\n            top: this.state.ElementStyle.top,\r\n            height: this.state.ElementStyle.height,\r\n            width: this.state.ElementStyle.width,\r\n            cursor: \"move\",\r\n          }\r\n        });\r\n        \r\n      }\r\n      } else {\r\n        this.setState({\r\n          possibleResizeModeOn: false,\r\n          ElementStyle: {\r\n            left: this.state.ElementStyle.left,\r\n            top: this.state.ElementStyle.top,\r\n            height: this.state.ElementStyle.height,\r\n            width: this.state.ElementStyle.width,\r\n            cursor: \"default\",\r\n          }\r\n        });\r\n      }\r\n    }\r\n  \r\n    handleMouseDown = (event) => {\r\n        // only if this is the selected bbox\r\n        if(this.props.isSelected){\r\n          //check if resize is on\r\n          // if click is inside resize-box -> resize\r\n          // otherwise -> drag\r\n  \r\n          if (this.state.possibleResizeModeOn === false){\r\n            this.setState({\r\n              dragModeOn: true,\r\n              diffx: event.pageX - this.state.l,\r\n              diffy: event.pageY - this.state.t,\r\n            });\r\n            document.addEventListener('mousemove', this.handleDrag);\r\n            ReactDOM.findDOMNode(this).removeEventListener('mousedown', this.handleMouseDown);\r\n            document.addEventListener('mouseup', this.handleMouseUp); \r\n          }\r\n      } else {\r\n        this.setState({\r\n          possibleResizeModeOn: false,\r\n          ElementStyle: {\r\n            left: this.state.ElementStyle.left,\r\n            top: this.state.ElementStyle.top,\r\n            height: this.state.ElementStyle.height,\r\n            width: this.state.ElementStyle.width,\r\n            cursor: \"default\",\r\n          }\r\n        });\r\n      }\r\n     }\r\n  \r\n     handleMouseUp = (event) => {\r\n      if(this.props.isSelected){\r\n        //console.log('handle mouse up - remove mouse move listener')\r\n        document.removeEventListener('mousemove', this.handleResize); \r\n          this.setState({          \r\n            ElementStyle: {\r\n              left: this.state.ElementStyle.left,\r\n              top: this.state.ElementStyle.top,\r\n              height: this.state.ElementStyle.height,\r\n              width: this.state.ElementStyle.width,\r\n              cursor: \"move\",\r\n            }\r\n          });\r\n  \r\n          this.setState({\r\n            dragModeOn: false,\r\n            possibleResizeModeOn: false, \r\n            resizeModeOn: false,\r\n          }); \r\n          document.removeEventListener('mousemove', this.handleDrag); \r\n          \r\n          if (ReactDOM.findDOMNode(this) !== undefined){\r\n            ReactDOM.findDOMNode(this).addEventListener('mousedown', this.handleMouseDown);\r\n          }\r\n          document.removeEventListener('mouseup', this.handleMouseUp);\r\n      } else {\r\n        this.setState({\r\n          possibleResizeModeOn: false,\r\n          ElementStyle: {\r\n            left: this.state.ElementStyle.left,\r\n            top: this.state.ElementStyle.top,\r\n            height: this.state.ElementStyle.height,\r\n            width: this.state.ElementStyle.width,\r\n            cursor: \"default\",\r\n          }\r\n        });\r\n      }\r\n     }\r\n  \r\n     handleDrag = (event) => {\r\n      if(this.props.isSelected){\r\n        this.setState({          \r\n          ElementStyle: {\r\n            left: this.state.ElementStyle.left,\r\n            top: this.state.ElementStyle.top,\r\n            height: this.state.ElementStyle.height,\r\n            width: this.state.ElementStyle.width,\r\n            cursor: \"move\",\r\n          }\r\n        });\r\n        if (this.state.dragModeOn === true) {\r\n          this.setState({\r\n            l: event.pageX - this.state.diffx,\r\n            t: event.pageY - this.state.diffy,\r\n          });\r\n  \r\n          this.setState({\r\n            ElementStyle: {\r\n              left: (event.pageX - this.state.diffx) + \"px\",\r\n              top: (event.pageY - this.state.diffy) + \"px\",\r\n              height: this.state.ElementStyle.height,\r\n              width: this.state.ElementStyle.width,\r\n              cursor: \"move\",\r\n            }\r\n          });\r\n          this.props.handleBBoxUpdate(this.state.l,this.state.t,this.state.w,this.state.h, this.props.number); \r\n        }\r\n      }else {\r\n        this.setState({\r\n          possibleResizeModeOn: false,\r\n          ElementStyle: {\r\n            left: this.state.ElementStyle.left,\r\n            top: this.state.ElementStyle.top,\r\n            height: this.state.ElementStyle.height,\r\n            width: this.state.ElementStyle.width,\r\n            cursor: \"default\",\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n  \r\n  export default BoundingBox;","import React from 'react';\r\n\r\nclass SpeechBubble extends React.Component {\r\n      \r\n\r\n    render() {\r\n        return(\r\n            <p className=\"speech\" style = {{\r\n                width: this.props.width,\r\n                left: this.props.left,\r\n                top: this.props.top,\r\n                lineHeight: this.props.lineHeight,\r\n                display: this.props.display,\r\n            }\r\n        }\r\n        >{this.props.text}</p>    \r\n        );\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n}  \r\n\r\n\r\n\r\nexport default SpeechBubble;","import React from 'react';\r\n\r\nclass SpeechBubbleFlipped extends React.Component {\r\n      \r\n\r\n    render() {\r\n        return(\r\n            <p className=\"speechflipped\" style = {{\r\n                width: this.props.width,\r\n                left: this.props.left,\r\n                top: this.props.top,\r\n                lineHeight: this.props.lineHeight,\r\n                display: this.props.display,\r\n            }\r\n        }\r\n        >{this.props.text}</p>    \r\n        );\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n}  \r\n\r\n\r\n\r\nexport default SpeechBubbleFlipped;","import React, { Component } from 'react'\nimport Slider from './Slider.jsx'\nimport BoundingBox from './BoundingBox'\nimport SpeechBubble from './SpeechBubble'\nimport SpeechBubbleFlipped from './SpeechBubbleFlipped'\n\n// color scheme https://www.schemecolor.com/coral-blue.php\nclass App extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <FrameArea>\n        </FrameArea>\n      </div>\n    )\n  }\n}\n\n// area shows the video and is the region where the bounding-box(es)\n// can be moved \nclass FrameArea extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    // add empty bbox [0,0,0,0] for every frame\n    var _trackerOutput = []\n    var _num_imgs = 140;\n    for (var i = 0; i < _num_imgs; i++) {\n      _trackerOutput.push([0,0,0,0]);\n    }\n\n    _trackerOutput[0][0] = 40;\n    _trackerOutput[0][1] = 42;\n    _trackerOutput[0][2] = 23;\n    _trackerOutput[0][3] = 66;\n\n    this.state = { \n      trackerOutput: _trackerOutput, \n      frameNumber: 1, //start counting at 1\n      maxFrameNumber: 1, // max frame number that has been labelled by tracker or manually\n      imagesrc: \"pedestrian/00000001.jpg\",\n      imagewidth: 1,\n      original_imagewidth: 1,\n      original_height: 1,\n      imagebasepath: \"pedestrian/\",\n      trackingInProgress: 0,\n      // props for BoundingBox\n      l: _trackerOutput[0][0],\n      t: _trackerOutput[0][1],\n      h: _trackerOutput[0][2],\n      w: _trackerOutput[0][3],\n      num_imgs: _num_imgs,\n      frameNumberStyle : {\n        position: \"relative\",\n        left: \"3px\",\n      },\n      colorPalette: {\n        CoralReef: \"#FD7C6F\",\n        LightSalmon: \"#F89D7D\",\n        RoyalBlue: \"#4760E9\",\n        BleuDeFrance: \"#3197E9\", \n        DarkTurquoise: \"#11CDDE\",\n        LightGray: \"#DEDEDE\",\n      },\n    };\n\n    this.handleBBoxUpdate = this.handleBBoxUpdate.bind(this)\n    this.setFrameNo = this.setFrameNo.bind(this)\n    this.onImgLoad = this.onImgLoad.bind(this)    \n    this.closeHint = this.closeHint.bind(this)\n\n    //this.getImageCount()\n  }\n\n/*\ngetImageCount() {\n\n  var imageExists = true;\n  var frameno = 100;\n  while(imageExists){\n    var img = new Image();\n    img.src = this.getFrameFromFrameNo(frameno)\n\n    // if this failed, so the final image was the previous one\n    img.onerror = function() {  imageExists = false}\n    frameno = frameno + 1;\n  }\n  console.log('num imgs ' + imageExists)\n\n}*/\n\n\n  // https://stackoverflow.com/questions/23450534/how-to-call-a-python-function-from-node-js\n  // https://www.freecodecamp.org/news/create-a-react-frontend-a-node-express-backend-and-connect-them-together-c5798926047c/\n  // ref: https://stackoverflow.com/questions/51845170/how-to-deploy-a-node-js-app-that-runs-a-python-script-in-azure\n  //connect to node.js (code in api folder)\n  runTracker() {\n    if (this.state.trackingInProgress === 0 && this.state.frameNumber < this.state.num_imgs) {\n      this.setState({\n        trackingInProgress: 1,\n      });\n\n      let f = this.state.frameNumber - 1  \n\n      let url = \"https://video-annotation-tool.azurewebsites.net/\"\n\n      // \"../../api/routes/callPython/left/\" \n      //\"http://localhost:9000/callPython/left/\" // what path??\n      // port= set in www...\n\n      let pythonCall =  url + \"left/\" +  \n                        + this.state.trackerOutput[f][0] +\"/top/\"\n                        + this.state.trackerOutput[f][1] +\"/width/\"\n                        + this.state.trackerOutput[f][2] +\"/height/\"\n                        + this.state.trackerOutput[f][3] +\"/frameno/\" \n                        + f + \"/\"\n\n\n      console.log('App:  python call ' + pythonCall);\n      fetch(pythonCall) \n        .then(res => res.text())\n        .then(res => this.handleTrackerOutput(res) );      \n\n        document.activeElement.blur(); // remove focus from button after click  => not triggered by pressing enter\n    }\n  }\n\n  \n\n  render(){\n\n    const boundingBoxes = [];\n    \n    // code below prints all selected bboxes\n    /*\n    for (var i = 0; i < this.state.trackerOutput.length; i += 1) { // this.state.numChildren\n      \n      //console.log('add? ' + this.state.trackerOutput[i][0] + ' ' + this.state.trackerOutput[i][1]+ ' ' + this.state.trackerOutput[i][2]+ ' ' + this.state.trackerOutput[i][3]) \n      if(this.state.trackerOutput[i][0] !== undefined \n        && this.isValidBBox(this.state.trackerOutput[i])){\n        let _classname = \"bbox\"\n        let _isSelected = false\n        if (i !== this.state.frameNumber-1){\n          //_classname = \"bbox selected\"\n          //_isSelected = true\n          //console.log('selected bbox')\n       \n\n        //console.log('add ' + this.state.trackerOutput[i])\n\n        boundingBoxes.push(<BoundingBox \n          l = {this.state.trackerOutput[i][0]} \n          t = {this.state.trackerOutput[i][1]} \n          w = {this.state.trackerOutput[i][2]} \n          h = {this.state.trackerOutput[i][3]}  \n          key={i} \n          number={i}\n          classname = {_classname}\n          isSelected = {_isSelected}\n          frameNumber = {this.state.frameNumber}\n          handleBBoxUpdate = {this.handleBBoxUpdate} />);\n        }\n      }\n    };*/\n\n    let _classname = \"bbox selected\"\n    let _isSelected = true\n    var i = this.state.frameNumber-1\n    //console.log('valid framenumber? ' + (i))\n    // place selected bbox on top\n    boundingBoxes.push(<BoundingBox \n      l = {this.state.trackerOutput[i][0]} \n      t = {this.state.trackerOutput[i][1]} \n      w = {this.state.trackerOutput[i][2]} \n      h = {this.state.trackerOutput[i][3]}  \n      key={i} \n      number={i}\n      classname = {_classname}\n      isSelected = {_isSelected}\n      frameNumber = {this.state.frameNumber}\n      handleBBoxUpdate = {this.handleBBoxUpdate} />);\n\n    //note: changed slider from input type=\"range\" min=\"1\" step=\"1\" to Slider\n    var diplayWaitIcon = 'none';\n    if(this.state.trackingInProgress === 1){\n      diplayWaitIcon = 'inline';\n    }\n\n    var displaySpeechBubble1 = 'none';\n    if(this.state.frameNumber === 1){\n      displaySpeechBubble1 = 'inline';\n    }\n\n    var displaySpeechBubble2 = 'none';\n    if(this.state.maxFrameNumber > 1){\n      displaySpeechBubble2 = 'inline';\n    }\n\n    return (\n\n      <div id=\"FrameArea\">\n      {boundingBoxes}\n      <img id = \"frame\" className = \"frame\" onLoad={this.onImgLoad} src={this.state.imagesrc}  alt=\"\" draggable=\"false\"></img>\n      <input type=\"image\" src=\"track-icon.svg\" alt=\"run tracker\" id=\"btn_runtracker\" onClick = {() => this.runTracker()}/>\n      <input type=\"image\" style={{display: diplayWaitIcon}} className=\"rotating\" src=\"wait-icon.svg\" alt=\"run tracker\"/>\n      <Slider max_value={this.state.num_imgs} max_tracked = {this.state.maxFrameNumber}  min_value = {1} value={this.state.frameNumber} setFrameNo = {this.setFrameNo} colorPalette = {this.state.colorPalette} imagewidth = {this.state.imagewidth} num_imgs = {this.state.num_imgs}/>\n      <SpeechBubble text = 'Click to run tracker and get bounding box suggestions.' display = 'inline' width = '342px' left = '343px' top = '-110px' lineHeight = '50px'></SpeechBubble>\n      <SpeechBubble text = 'Mark object with box. Press Enter to see next frame.' display = {displaySpeechBubble1}  width = '320px' left = '10px' top = '-72px' lineHeight = '50px'></SpeechBubble>\n      <SpeechBubbleFlipped text = 'Move slider or press arrows to see marked frames.' onClick = {this.closeHint} display = {displaySpeechBubble2}  width = '320px' left = {(this.state.frameNumber - 1) * (this.state.imagewidth/this.state.num_imgs) - 24} top = '310px' lineHeight = '50px'></SpeechBubbleFlipped>\n\n      </div>\n    )\n  }\n\n\n  closeHint(){\n    console.log('close')\n  }\n\n  setFrameNo(frameno){\n    this.setState({\n      frameNumber: frameno,\n    }, () => {\n      this.setState({\n        imagesrc: this.getFrame(),\n      });\n    });\n  }\n\n\n  handleTrackerOutput(res){\n    console.log('handle tracker output')\n    res = res.split('\\r\\n')\n    var _trackerOutput = this.state.trackerOutput;\n\n    // note: at this point frameNumber is the frame where the tracker run started\n    // res starts at frameNumber\n    var last_tracked_box = this.state.frameNumber;\n    for (var i = this.state.frameNumber; i < Math.min(this.state.frameNumber + res.length - 2, this.state.num_imgs); i++ ){ //-2 because there is always an empty string at the end\n\n      var item = res[i - this.state.frameNumber + 1].split(',');\n      if(item[0] !== \"\"){\n        _trackerOutput[i][0] = item[0]; \n        _trackerOutput[i][1] = item[1]; \n        _trackerOutput[i][2] = item[2]; \n        _trackerOutput[i][3] = item[3]; \n        last_tracked_box = i;\n      }else{\n        break;\n      }\n    }\n\n    // now that we added all the tracked bounding boxes until failure:\n    // add at the same location as the last fail all other bboxes\n\n    // suggest bbox one frame after tracking failure frame\n    if (i > 0 && last_tracked_box + 1 < this.state.num_imgs){\n      let i = last_tracked_box + 1 //TODO remove + 1??\n      _trackerOutput[i][0] = _trackerOutput[i-1][0]; \n      _trackerOutput[i][1] = _trackerOutput[i-1][1]; \n      _trackerOutput[i][2] = _trackerOutput[i-1][2]; \n      _trackerOutput[i][3] = _trackerOutput[i-1][3];\n    }\n\n    var _new_frame_number = last_tracked_box + 1; \n    if (last_tracked_box + 2 <= this.state.num_imgs){\n      _new_frame_number = last_tracked_box + 2;\n    }\n    console.log('set frameNumber to ' + _new_frame_number)\n\n    this.setState({ \n      trackingInProgress: 0,\n      trackerOutput: _trackerOutput,\n      frameNumber: _new_frame_number,\n      maxFrameNumber: _new_frame_number,\n      imagesrc: this.getFrameFromFrameNo(_new_frame_number),\n    } );\n\n    console.log('set maxFrameNumber ' + this.state.maxFrameNumber)\n  }\n\n  getFrame(){\n    return this.state.imagebasepath + this.pad(this.state.frameNumber,8) +\".jpg\"  //number with 8 digits pad with leading zeros\n  }\n\n  getFrameFromFrameNo(frameno){\n    return this.state.imagebasepath + this.pad(frameno,8) +\".jpg\"  //number with 8 digits pad with leading zeros\n  }\n\n  pad(num, size) {\n    var s = num+\"\";\n    while (s.length < size) s = \"0\" + s;\n    return s;\n}\n\n\nonImgLoad(){\n   \n  this.setState({\n    original_imagewidth: document.getElementById('frame').clientWidth,\n    original_imageheight: document.getElementById('frame').clientHeight,\n    imagewidth: document.getElementById('frame').clientWidth,\n  });\n  //this.reportWindowSize();\n\n}\n\n  componentDidMount() {\n    document.getElementById('frame').ondragstart = function() { return false; };\n    this.setState({\n      imagesrc: this.getFrame(),\n    });\n    document.addEventListener(\"keydown\", this.handleKeyPress)\n    //window.addEventListener('resize', this.reportWindowSize);\n  }\n\n  /*\n  reportWindowSize = () => {\n\n    console.log('resize')\n    var body = document.getElementsByTagName('body')[0];\n\n    var o_h = this.state.original_imagewidth;\n    var o_w = this.state.original_imageheight;\n\n    // scale image so that it fits the screen\n    var w = body.clientWidth - 200;\n    var h = body.clientHeight - 200;\n\n    if (o_w != w){\n\n      var scale_factor_w = w / o_w;\n      var new_height = o_h * scale_factor_w;\n\n      console.log('oh' + o_h + 'new height ' + new_height)\n      if (new_height > h) {\n        var scale_factor_h = h / o_h;\n        w = o_w * scale_factor_h;\n      }\n\n      this.setState({\n        imagewidth: w,\n      });\n  }\n\n  }*/\n\n  handleBBoxUpdate(l,t,w,h,number){\n    var temp_trackerOutput = this.state.trackerOutput;\n    temp_trackerOutput[number][0] = l;\n    temp_trackerOutput[number][1] = t;\n    temp_trackerOutput[number][2] = w;\n    temp_trackerOutput[number][3] = h;\n\n    this.setState({\n      trackerOutput: temp_trackerOutput,\n    });\n  }\n\n  isValidBBox(bbox){\n    return bbox[0] !== 0 || bbox[1] !== 0 || bbox[2] !== 0 || bbox[3] !== 0\n  }\n\n  handleKeyPress = (event) => {\n\n    // if user presses enter -> confirm bounding box selection for current frame\n    // -> advance frame number\n    // save selection of curr bbox\n    // jumpt to frame after curr frame\n    // if next bbox exists, change curr and leave next bbox the same\n    // if next bbox does not exist, set next bbox to curr\n\n    if (event.keyCode === 13) {  // enter\n      console.log(\"ENTER\")      \n\n      // if no bbox on this.state.frameNumber + 1 copy over previous bbox\n      var _trackerOutput = this.state.trackerOutput\n      let i = this.state.frameNumber\n\n      if (\n        this.isValidBBox(_trackerOutput[i] === false) &&\n        i < this.state.num_imgs){\n          _trackerOutput[i][0] = _trackerOutput[i-1][0]; \n          _trackerOutput[i][1] = _trackerOutput[i-1][1]; \n          _trackerOutput[i][2] = _trackerOutput[i-1][2]; \n          _trackerOutput[i][3] = _trackerOutput[i-1][3];\n\n        let _new_frame_number = (Number(this.state.frameNumber) + 1)\n        console.log('set new frameNumber ' + _new_frame_number)\n\n        this.setState({\n          frameNumber: _new_frame_number,\n          maxFrameNumber: Math.max(_new_frame_number, this.state.maxFrameNumber), \n          trackerOutput: _trackerOutput,\n        }, () => {\n          this.setState({\n            imagesrc: this.getFrame(),\n          });\n        });\n      }\n    }else if(event.keyCode === 39){ // right arrow\n      console.log('RIGHT')\n      this.setState({\n        frameNumber: Math.min(this.state.frameNumber + 1, this.state.maxFrameNumber),\n      }, () => {\n        this.setState({\n          imagesrc: this.getFrame(),\n        });\n      });\n    }else if(event.keyCode === 37){ // left arrow\n      console.log('LEFT')\n      this.setState({\n        frameNumber: Math.max(this.state.frameNumber - 1, 1),\n      }, () => {\n        this.setState({\n          imagesrc: this.getFrame(),\n        });\n      });\n    }\n\n  }\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}